
    
    <link 
    rel="stylesheet" 
    href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""
    />
      
    <script
    src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin="">
    </script>
          
      
     <style>
      #mapid { height: 400px;}
     </style>

 

<div id="mapid" style="float: right; width: 300px"></div> 
<script> 
      
    var mymap = L.map('mapid').setView([55.010, -3.010], 5);     
          
    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: 'pk.eyJ1IjoidDE1aHMxOSIsImEiOiJja2dyaGx2amQwZjBtMnhxdzBmd2loZ3F5In0.NemiDxQl-m-_CBtwLT4R7Q'
    }).addTo(mymap);
       
        
   
    var marker = L.marker([<%= @location.latitude %>, <%= @location.longitude %>]).addTo(mymap);

          
        
</script>




<p id="notice"><%= notice %></p>

<p>
  <strong>Region:</strong>
  <%= @location.region %>
</p>

<p>
  <strong>Area code:</strong>
  <%= @location.area_code %>
</p>

<p>
  <strong>Latitude:</strong>
  <%= @location.latitude %>
</p>

<p>
  <strong>Longitude:</strong>
  <%= @location.longitude %>
</p>

<style>
  .row {
    display: flex;
  }

  .column {
    flex: 50%;
  }
</style>

<div class="row">
  <div class="column">
    <table>
    <thead>
        <tr>
            <th>Month</th>
            <th>Year</th>
            <th>Detached</th>
            <th>Semidetached </th>
            <th>Terraced</th>
            <th>Flat</th>
        </tr>
    </thead>
   

  <tbody>
  <% @housingtypeprice.each do |housingtypeprice| %>

   
        <tr>
            
            <td><%= housingtypeprice.month %></td>
            <td><%= housingtypeprice.year %></td>
            
            <td><%= housingtypeprice.detached %></td>
            <td><%= housingtypeprice.semidetached %></td>
            <td><%= housingtypeprice.terraced %></td>
            <td><%= housingtypeprice.flat %></td>
        </tr>

  <% end %>
  </tbody>
  </table>

<br/>


<table>
    <thead>
        <tr>
            <th>Month</th>
            <th>Year</th>
            <th>Average Price</th>
            <th>Cash Price</th>
            <th>Mortgage Price</th>
        </tr>
    </thead>
   

  <tbody>
  <% @financingtype.each do |financingtype| %>

   
        <tr>
            <td><%= financingtype.month %></td>
            <td><%= financingtype.year %></td>
            <td><%= financingtype.average_price %></td>
            <td><%= financingtype.cash_price %></td>
            <td><%= financingtype.mortgage_price %></td>
        </tr>

  <% end %>
  </tbody>
  </table>
  </div>
  <div class="column">
    <div id="linechart" style="width:100%;height:400px;"></div>
  </div>
</div>

<p>
  

<%= link_to 'Edit', edit_location_path(@location) %> |
<%= link_to 'Back', locations_path %>

<div id="container" style="width:100%;height:400px;"></div>

<script type="text/javascript">

document.addEventListener('DOMContentLoaded',function(){
  var myChart = Highcharts.chart('container',{
    chart: {
      type: 'bar'
    },
    title: {
      text: 'House price UK'
    },
    xAxis: {
      categories: ['Detached', 'Semidetached', 'Terraced', 'Flat']
    },
    yAxis: {
      title: {
        text: 'price'
      }
    },
    series: [{
      name: '2014',
      data: <%=raw @prices_array_2014 %>
    }, {
      name: '2019',
      data: <%=raw @prices_array_2019 %>
    }]
  });
});
</script>

<script>
document.addEventListener('DOMContentLoaded',function(){
  var myLineChart = Highcharts.chart('linechart', {

    title: {
        text: 'Cash and mortage housing price 2014 and 2019'
    },

    yAxis: {
        title: {
            text: 'Price'
        }
    },

    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr']
    },

    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    plotOptions: {
        series: {
            label: {
                connectorAllowed: false
            },
        }
    },

    series: [{
        name: 'Cash price 2014',
        data: <%=raw @monthly_cash_price[2014] %> 
    }, {
        name: 'Cash price 2019',
        data: <%=raw @monthly_cash_price[2019] %> 
    }, {
        name: 'Mortgage price 2014',
        data: <%=raw @monthly_mortgage_price[2014] %> 
    }, {
        name: 'Mortgage price 2019',
        data: <%=raw @monthly_mortgage_price[2019] %> 
    } ],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

})});
</script>